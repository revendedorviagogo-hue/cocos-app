import{j as p,_ as y,k as w}from"./index-Dh3SBaGN.js";(function(){try{var t=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(t._sentryDebugIds=t._sentryDebugIds||{},t._sentryDebugIds[e]="59f3937f-b0b3-44f4-9918-ea61402ef2a4",t._sentryDebugIdIdentifier="sentry-dbid-59f3937f-b0b3-44f4-9918-ea61402ef2a4")}catch{}})();var m=function(){function t(){this.fetchObserver=null}return t.prototype.start=function(e){this.eventCallback=e,this.observeFetch()},t.prototype.stop=function(){var e;(e=this.fetchObserver)===null||e===void 0||e.call(this),this.fetchObserver=null,this.eventCallback=void 0},t.prototype.notifyEvent=function(e){var r;(r=this.eventCallback)===null||r===void 0||r.call(this,e)},t.prototype.observeFetch=function(){var e=this,r=p();if(r){var u=r.fetch;u&&(r.fetch=function(h,o){return y(e,void 0,void 0,function(){var i,n,f,s,c,d,s,l;return w(this,function(a){switch(a.label){case 0:i=Date.now(),n={timestamp:i,type:"fetch",method:(o==null?void 0:o.method)||"GET",url:h.toString(),requestHeaders:o==null?void 0:o.headers},a.label=1;case 1:return a.trys.push([1,3,,4]),[4,u(h,o)];case 2:return f=a.sent(),s=Date.now(),n.status=f.status,n.duration=s-i,c={},f.headers.forEach(function(v,b){c[b]=v}),n.responseHeaders=c,this.notifyEvent(n),[2,f];case 3:throw d=a.sent(),s=Date.now(),n.duration=s-i,l=d,n.error={name:l.name||"UnknownError",message:l.message||"An unknown error occurred"},this.notifyEvent(n),d;case 4:return[2]}})})},this.fetchObserver=function(){r.fetch=u})}},t}();export{m as NetworkObservers};
//# sourceMappingURL=observers-CbO7gD6I.js.map
