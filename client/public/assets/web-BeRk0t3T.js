import{W as o}from"./index-Dh3SBaGN.js";(function(){try{var n=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(n._sentryDebugIds=n._sentryDebugIds||{},n._sentryDebugIds[e]="a4472d24-790a-4da1-aee0-dd0e7568ada0",n._sentryDebugIdIdentifier="sentry-dbid-a4472d24-790a-4da1-aee0-dd0e7568ada0")}catch{}})();class l extends o{constructor(){super(),this.not_supported_mssg="This method is not supported",this.options_missing_mssg="Firebase options are missing",this.duplicate_app_mssg="Firebase app already exists",this.analytics_missing_mssg="Firebase analytics is not initialized. Make sure initializeFirebase() is called once",this.scripts=[{key:"firebase-app",src:"https://www.gstatic.com/firebasejs/8.2.3/firebase-app.js"},{key:"firebase-ac",src:"https://www.gstatic.com/firebasejs/8.2.3/firebase-analytics.js"}],this.ready=new Promise(e=>this.readyResolver=e),this.configure()}initializeFirebase(e){return new Promise(async(s,i)=>{if(await this.ready,this.hasFirebaseInitialized()){i(this.duplicate_app_mssg);return}if(!e){i(this.options_missing_mssg);return}const t=window.firebase.initializeApp(e);this.analyticsRef=t.analytics(),s(this.analyticsRef)})}setUserId(e){return new Promise(async(s,i)=>{if(await this.ready,!this.analyticsRef){i(this.analytics_missing_mssg);return}const{userId:t}=e||{userId:void 0};if(!t){i("userId property is missing");return}this.analyticsRef.setUserId(t),s()})}setUserProperty(e){return new Promise(async(s,i)=>{if(await this.ready,!this.analyticsRef){i(this.analytics_missing_mssg);return}const{name:t,value:a}=e||{name:void 0,value:void 0};if(!t){i("name property is missing");return}if(!a){i("value property is missing");return}let r={};r[t]=a,this.analyticsRef.setUserProperties(r),s()})}getAppInstanceId(){return new Promise((e,s)=>e)}setScreenName(e){return new Promise((s,i)=>s)}reset(){return new Promise((e,s)=>e)}logEvent(e){return new Promise(async(s,i)=>{if(await this.ready,!this.analyticsRef){i(this.analytics_missing_mssg);return}const{name:t,params:a}=e||{name:void 0,params:void 0};if(!t){i("name property is missing");return}this.analyticsRef.logEvent(t,a),s()})}setCollectionEnabled(e){return new Promise(async(s,i)=>{if(await this.ready,!this.analyticsRef){i(this.analytics_missing_mssg);return}const{enabled:t}=e||{enabled:!1};this.analyticsRef.setAnalyticsCollectionEnabled(t),s()})}setSessionTimeoutDuration(e){return new Promise((s,i)=>{i(this.not_supported_mssg)})}get remoteConfig(){return this.analyticsRef}enable(){return new Promise(async(e,s)=>{if(await this.ready,!this.analyticsRef){s(this.analytics_missing_mssg);return}this.analyticsRef.setAnalyticsCollectionEnabled(!0),e()})}disable(){return new Promise(async(e,s)=>{if(await this.ready,!this.analyticsRef){s(this.analytics_missing_mssg);return}this.analyticsRef.setAnalyticsCollectionEnabled(!1),e()})}async configure(){try{await this.loadScripts(),window.firebase&&window.firebase.analytics&&this.hasFirebaseInitialized()&&(this.analyticsRef=window.firebase.analytics())}catch(s){throw s}const e=setInterval(()=>{window.firebase&&(clearInterval(e),this.readyResolver())},50)}loadScripts(){const e=this.scripts[0],s=this.scripts[1];return new Promise(async(i,t)=>{const a=this.scripts.map(r=>r.key);if(document.getElementById(a[0])&&document.getElementById(a[1]))return i(null);await this.loadScript(e.key,e.src),await this.loadScript(s.key,s.src),i(null)})}loadScript(e,s){return new Promise((i,t)=>{const a=document.createElement("script");a.type="text/javascript",a.src=s,a.id=e,a.onload=i,a.onerror=t,document.querySelector("head").appendChild(a)})}hasFirebaseInitialized(){if(!window.firebase)return!1;const e=window.firebase.apps;return!(e&&e.length===0)}}export{l as FirebaseAnalyticsWeb};
//# sourceMappingURL=web-BeRk0t3T.js.map
