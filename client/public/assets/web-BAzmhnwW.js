import{W as u}from"./index-Dh3SBaGN.js";(function(){try{var r=typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},e=new Error().stack;e&&(r._sentryDebugIds=r._sentryDebugIds||{},r._sentryDebugIds[e]="b3c23ca1-a554-48d2-844c-e7a6b36cf511",r._sentryDebugIdIdentifier="sentry-dbid-b3c23ca1-a554-48d2-844c-e7a6b36cf511")}catch{}})();class p extends u{constructor(){super({name:"CameraPreview",platforms:["web"]})}async start(e){return new Promise(async(n,i)=>{var a;await navigator.mediaDevices.getUserMedia({audio:!e.disableAudio,video:!0}).then(t=>{t.getTracks().forEach(d=>d.stop())}).catch(t=>{i(t)});const s=document.getElementById("video"),o=document.getElementById(e.parent);if(s)i({message:"camera already started"});else{const t=document.createElement("video");t.id="video",t.setAttribute("class",e.className||""),e.position!=="rear"&&t.setAttribute("style","-webkit-transform: scaleX(-1); transform: scaleX(-1);");const d=navigator.userAgent.toLowerCase();if(d.includes("safari")&&!d.includes("chrome")&&(t.setAttribute("autoplay","true"),t.setAttribute("muted","true"),t.setAttribute("playsinline","true")),o.appendChild(t),!((a=navigator.mediaDevices)===null||a===void 0)&&a.getUserMedia){const l={video:{width:{ideal:e.width},height:{ideal:e.height}}};e.position==="rear"?(l.video.facingMode="environment",this.isBackCamera=!0):this.isBackCamera=!1,navigator.mediaDevices.getUserMedia(l).then(function(c){t.srcObject=c,t.play(),n()},c=>{i(c)})}}})}async stop(){const e=document.getElementById("video");if(e){e.pause();const i=e.srcObject.getTracks();for(let a=0;a<i.length;a++)i[a].stop();e.remove()}}async capture(e){return new Promise((n,i)=>{const a=document.getElementById("video"),s=document.createElement("canvas"),o=s.getContext("2d");s.width=a.videoWidth,s.height=a.videoHeight,this.isBackCamera||(o.translate(a.videoWidth,0),o.scale(-1,1)),o.drawImage(a,0,0,a.videoWidth,a.videoHeight);let t;e.quality!=null?t=s.toDataURL("image/jpeg",e.quality/100).replace("data:image/jpeg;base64,",""):t=s.toDataURL("image/png").replace("data:image/png;base64,",""),n({value:t})})}async getSupportedFlashModes(){throw new Error("getSupportedFlashModes not supported under the web platform")}async setFlashMode(e){throw new Error("setFlashMode not supported under the web platform")}async flip(){throw new Error("flip not supported under the web platform")}async openAppSettings(){throw this.unimplemented("openAppSettings no est√° disponible en la plataforma web.")}}export{p as CameraPreviewWeb};
//# sourceMappingURL=web-BAzmhnwW.js.map
