{"version":3,"file":"push-manager-factory-Cz2QYeAO.js","sources":["../../node_modules/@braze/web-sdk/shared-lib/encoding-utils.js","../../node_modules/@braze/web-sdk/src/Push/push-manager.js","../../node_modules/@braze/web-sdk/src/Push/push-manager-factory.js"],"sourcesContent":["const ei = {\n  Tn: function (t) {\n    const r = (t + \"=\".repeat((4 - (t.length % 4)) % 4))\n        .replace(/\\-/g, \"+\")\n        .replace(/_/g, \"/\"),\n      n = atob(r),\n      o = new Uint8Array(n.length);\n    for (let t = 0; t < n.length; ++t) o[t] = n.charCodeAt(t);\n    return o;\n  },\n};\nexport default ei;\n","import { isArray as j, isEqual as ii } from \"../util/code-utils.js\";\nimport ti from \"../models/push-token.js\";\nimport { logger as r, EncodingUtils as ei } from \"../../shared-lib/index.js\";\nimport { STORAGE_KEYS as o } from \"../managers/storage-manager.js\";\nimport { User } from \"../User/index.js\";\nimport { WindowUtils as eo } from \"../util/window-utils.js\";\nimport vt from \"./utils/push-utils.js\";\nimport { getErrorMessage as si } from \"../util/error-utils.js\";\nexport default class ea {\n  constructor(i, t, e, s, r, n, o, u, a, c) {\n    (this.sn = i),\n      (this.rn = t),\n      (this.on = e),\n      (this.un = r),\n      (this.an = n),\n      (this.yt = o),\n      (this.cn = u),\n      (this.hn = a),\n      (this.u = c),\n      (this.sn = i),\n      (this.rn = t),\n      (this.on = e),\n      (this.fn = s + \"/safari/\" + t),\n      (this.un = r || \"/service-worker.js\"),\n      (this.an = n),\n      (this.yt = o),\n      (this.cn = u || !1),\n      (this.hn = a || !1),\n      (this.u = c),\n      (this.ln = vt.dn()),\n      (this.pn = vt.bn());\n  }\n  mn() {\n    return this.hn;\n  }\n  yn(i, t, e, s, n) {\n    i.unsubscribe()\n      .then((i) => {\n        i\n          ? this.vn(t, e, s, n)\n          : (r.error(\"Failed to unsubscribe device from push.\"),\n            \"function\" == typeof n && n(!1));\n      })\n      .catch((i) => {\n        r.error(\"Push unsubscription error: \" + i),\n          \"function\" == typeof n && n(!1);\n      });\n  }\n  gn(i, t, e) {\n    var s;\n    const n = ((i) => {\n      if (\"string\" == typeof i) return i;\n      if (0 !== i.endpoint.indexOf(\"https://android.googleapis.com/gcm/send\"))\n        return i.endpoint;\n      let t = i.endpoint;\n      const e = i;\n      return (\n        e.wn &&\n          -1 === i.endpoint.indexOf(e.wn) &&\n          (t = i.endpoint + \"/\" + e.wn),\n        t\n      );\n    })(i);\n    let o = null,\n      u = null;\n    const a = i;\n    if (null != a.getKey)\n      try {\n        const i = Array.from(new Uint8Array(a.getKey(\"p256dh\"))),\n          t = Array.from(new Uint8Array(a.getKey(\"auth\")));\n        (o = btoa(String.fromCharCode.apply(null, i))),\n          (u = btoa(String.fromCharCode.apply(null, t)));\n      } catch (i) {\n        r.error(si(i));\n      }\n    const c = ((i) => {\n      let t;\n      return i.options &&\n        (t = i.options.applicationServerKey) &&\n        t.byteLength &&\n        t.byteLength > 0\n        ? btoa(String.fromCharCode.apply(null, Array.from(new Uint8Array(t))))\n            .replace(/\\+/g, \"-\")\n            .replace(/\\//g, \"_\")\n        : null;\n    })(a);\n    null === (s = this.sn) || void 0 === s || s.kn(n, t, o, u, c),\n      n && \"function\" == typeof e && e(n, o, u);\n  }\n  Pn() {\n    var i;\n    null === (i = this.sn) || void 0 === i || i.Dn(!0);\n  }\n  Sn(i, t) {\n    var e;\n    null === (e = this.sn) || void 0 === e || e.Dn(!1),\n      r.info(i),\n      \"function\" == typeof t && t(!1);\n  }\n  An(i, t, e, s) {\n    var n;\n    if (\"default\" === t.permission)\n      try {\n        window.safari.pushNotification.requestPermission(\n          this.fn,\n          i,\n          {\n            api_key: this.rn,\n            device_id:\n              (null === (n = this.on) || void 0 === n ? void 0 : n.ce().id) ||\n              \"\",\n          },\n          (t) => {\n            \"granted\" === t.permission &&\n              this.sn &&\n              this.sn.setPushNotificationSubscriptionType(\n                User.NotificationSubscriptionTypes.OPTED_IN,\n              ),\n              this.An(i, t, e, s);\n          },\n        );\n      } catch (i) {\n        this.Sn(\"Could not request permission for push: \" + i, s);\n      }\n    else\n      \"denied\" === t.permission\n        ? this.Sn(\n            \"The user has blocked notifications from this site, or Safari push is not configured in the Braze dashboard.\",\n            s,\n          )\n        : \"granted\" === t.permission &&\n          (r.info(\"Device successfully subscribed to push.\"),\n          this.gn(t.deviceToken, new Date(), e));\n  }\n  requestPermission(i, t, e) {\n    const s = (s) => {\n      switch (s) {\n        case \"granted\":\n          return void (\"function\" == typeof i && i());\n        case \"default\":\n          return void (\"function\" == typeof t && t());\n        case \"denied\":\n          return void (\"function\" == typeof e && e());\n        default:\n          r.error(\"Received unexpected permission result \" + s);\n      }\n    };\n    let n = !1;\n    if (\"default\" !== window.Notification.permission)\n      s(Notification.permission);\n    else {\n      const i = window.Notification.requestPermission((i) => {\n        n && s(i);\n      });\n      i\n        ? i.then((i) => {\n            s(i);\n          })\n        : (n = !0);\n    }\n  }\n  vn(i, t, e, s) {\n    const n = { userVisibleOnly: !0 };\n    null != t && (n.applicationServerKey = t),\n      i.pushManager\n        .subscribe(n)\n        .then((i) => {\n          r.info(\"Device successfully subscribed to push.\"),\n            this.gn(i, new Date(), e);\n        })\n        .catch((i) => {\n          vt.isPushBlocked()\n            ? (r.info(\"Permission for push notifications was denied.\"),\n              \"function\" == typeof s && s(!1))\n            : (r.error(\"Push subscription failed: \" + i),\n              \"function\" == typeof s && s(!0));\n        });\n  }\n  jn() {\n    return this.cn\n      ? navigator.serviceWorker.getRegistration(this.un)\n      : navigator.serviceWorker.register(this.un).then(() =>\n          navigator.serviceWorker.ready.then(\n            (i) => (\n              i &&\n                \"function\" == typeof i.update &&\n                i.update().catch((i) => {\n                  r.info(\"ServiceWorker update failed: \" + i);\n                }),\n              i\n            ),\n          ),\n        );\n  }\n  xn(i) {\n    this.cn ||\n      (i.unregister(), r.info(\"Service worker successfully unregistered.\"));\n  }\n  subscribe(i, t) {\n    if (!vt.isPushSupported())\n      return r.info(ea.Nn), void (\"function\" == typeof t && t(!1));\n    if (this.ln) {\n      if (!this.cn && null != window.location) {\n        let i = this.un;\n        -1 === i.indexOf(window.location.host) &&\n          (i = window.location.host + i),\n          -1 === i.indexOf(window.location.protocol) &&\n            (i = window.location.protocol + \"//\" + i);\n        const e = i.substr(0, i.lastIndexOf(\"/\") + 1);\n        if (0 !== eo.Un().indexOf(e))\n          return (\n            r.error(\n              \"Cannot subscribe to push from a path higher than the service worker location (tried to subscribe from \" +\n                window.location.pathname +\n                \" but service worker is at \" +\n                i +\n                \")\",\n            ),\n            void (\"function\" == typeof t && t(!0))\n          );\n      }\n      if (vt.isPushBlocked())\n        return void this.Sn(\n          \"Notifications from this site are blocked. This may be a temporary embargo or a permanent denial.\",\n          t,\n        );\n      if (this.yt && !this.yt.Wn() && 0 === this.yt.ii())\n        return (\n          r.info(\n            \"Waiting for VAPID key from server config before subscribing to push.\",\n          ),\n          void this.yt._n(() => {\n            this.subscribe(i, t);\n          })\n        );\n      const e = () => {\n          r.info(\"Permission for push notifications was denied.\"),\n            \"function\" == typeof t && t(!1);\n        },\n        s = () => {\n          let i = \"Permission for push notifications was ignored.\";\n          vt.isPushBlocked() &&\n            (i +=\n              \" The browser has automatically blocked further permission requests for a period (probably 1 week).\"),\n            r.info(i),\n            \"function\" == typeof t && t(!0);\n        },\n        n = vt.isPushPermissionGranted(),\n        u = () => {\n          !n &&\n            this.sn &&\n            this.sn.setPushNotificationSubscriptionType(\n              User.NotificationSubscriptionTypes.OPTED_IN,\n            ),\n            this.jn()\n              .then((e) => {\n                if (null == e)\n                  return (\n                    r.error(\n                      \"No service worker registration. Set the `manageServiceWorkerExternally` initialization option to false or ensure that your service worker is registered before calling registerPush.\",\n                    ),\n                    void (\"function\" == typeof t && t(!0))\n                  );\n                e.pushManager\n                  .getSubscription()\n                  .then((s) => {\n                    var n;\n                    let u = null;\n                    if (\n                      (null !=\n                        (null === (n = this.yt) || void 0 === n\n                          ? void 0\n                          : n.Wn()) && (u = ei.Tn(this.yt.Wn())),\n                      s)\n                    ) {\n                      let n,\n                        a = null,\n                        c = null;\n                      if ((this.u && (n = this.u.j(o.C.In)), n && !j(n))) {\n                        let i;\n                        try {\n                          i = ti.qn(n).Vn;\n                        } catch (t) {\n                          i = null;\n                        }\n                        null == i ||\n                          isNaN(i.getTime()) ||\n                          0 === i.getTime() ||\n                          ((a = i),\n                          (c = new Date(a)),\n                          c.setMonth(a.getMonth() + 6));\n                      }\n                      null != u &&\n                      s.options &&\n                      s.options.applicationServerKey &&\n                      s.options.applicationServerKey.byteLength &&\n                      s.options.applicationServerKey.byteLength > 0 &&\n                      !ii(u, new Uint8Array(s.options.applicationServerKey))\n                        ? (s.options.applicationServerKey.byteLength > 12\n                            ? r.info(\n                                \"Device was already subscribed to push using a different VAPID provider, creating new subscription.\",\n                              )\n                            : r.info(\n                                \"Attempting to upgrade a gcm_sender_id-based push registration to VAPID - depending on the browser this may or may not result in the same gcm_sender_id-based subscription.\",\n                              ),\n                          this.yn(s, e, u, i, t))\n                        : s.expirationTime &&\n                          new Date(s.expirationTime).valueOf() <=\n                            new Date().valueOf()\n                        ? (r.info(\n                            \"Push subscription is expired, creating new subscription.\",\n                          ),\n                          this.yn(s, e, u, i, t))\n                        : n && j(n)\n                        ? this.yn(s, e, u, i, t)\n                        : null == c\n                        ? (r.info(\n                            \"No push subscription creation date found, creating new subscription.\",\n                          ),\n                          this.yn(s, e, u, i, t))\n                        : c.valueOf() <= new Date().valueOf()\n                        ? (r.info(\n                            \"Push subscription older than 6 months, creating new subscription.\",\n                          ),\n                          this.yn(s, e, u, i, t))\n                        : (r.info(\n                            \"Device already subscribed to push, sending existing subscription to backend.\",\n                          ),\n                          this.gn(s, a, i));\n                    } else this.vn(e, u, i, t);\n                  })\n                  .catch((i) => {\n                    r.error(\"Error checking current push subscriptions: \" + i);\n                  });\n              })\n              .catch((i) => {\n                r.error(\"ServiceWorker registration failed: \" + i);\n              });\n        };\n      this.requestPermission(u, s, e);\n    } else if (this.pn) {\n      if (null == this.an || \"\" === this.an)\n        return (\n          r.error(\n            \"You must supply the safariWebsitePushId initialization option in order to use registerPush on Safari\",\n          ),\n          void (\"function\" == typeof t && t(!0))\n        );\n      const e = window.safari.pushNotification.permission(this.an);\n      this.An(this.an, e, i, t);\n    }\n  }\n  unsubscribe(i, t) {\n    if (!vt.isPushSupported())\n      return r.info(ea.Nn), void (\"function\" == typeof t && t());\n    this.ln\n      ? navigator.serviceWorker.getRegistration().then((e) => {\n          e\n            ? e.pushManager\n                .getSubscription()\n                .then((s) => {\n                  s\n                    ? (this.Pn(),\n                      s\n                        .unsubscribe()\n                        .then((s) => {\n                          s\n                            ? (r.info(\n                                \"Device successfully unsubscribed from push.\",\n                              ),\n                              \"function\" == typeof i && i())\n                            : (r.error(\n                                \"Failed to unsubscribe device from push.\",\n                              ),\n                              \"function\" == typeof t && t()),\n                            this.xn(e);\n                        })\n                        .catch((i) => {\n                          r.error(\"Push unsubscription error: \" + i),\n                            \"function\" == typeof t && t();\n                        }))\n                    : (r.info(\"Device already unsubscribed from push.\"),\n                      \"function\" == typeof i && i());\n                })\n                .catch((i) => {\n                  r.error(\"Error unsubscribing from push: \" + i),\n                    \"function\" == typeof t && t();\n                })\n            : (r.info(\"Device already unsubscribed from push.\"),\n              \"function\" == typeof i && i());\n        })\n      : this.pn &&\n        (this.Pn(),\n        r.info(\"Device unsubscribed from push.\"),\n        \"function\" == typeof i && i());\n  }\n}\nea.Nn = \"Push notifications are not supported in this browser.\";\n","import e, { OPTIONS as L } from \"../managers/braze-instance.js\";\nimport ea from \"./push-manager.js\";\nconst na = {\n  t: !1,\n  i: null,\n  m: () => (\n    na.o(),\n    na.i ||\n      (na.i = new ea(\n        e.pr(),\n        e.ba(),\n        e.te(),\n        e.Hs(),\n        e.nn(L.wa),\n        e.nn(L.ya),\n        e.ir(),\n        e.nn(L.Ma),\n        e.nn(L._a),\n        e.l(),\n      )),\n    na.i\n  ),\n  o: () => {\n    na.t || (e.g(na), (na.t = !0));\n  },\n  destroy: () => {\n    (na.i = null), (na.t = !1);\n  },\n};\nexport default na;\n"],"names":["ei","t","r","n","o","ea","e","s","u","a","c","vt","i","si","User","eo","j","ti","ii","na","L"],"mappings":"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","x_google_ignoreList":[0,1,2]}